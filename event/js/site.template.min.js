$(document).ready(function(){ui.init(),modules.init(),plugins.init(),forms.init("body")});var ui=function(a){"use strict";function b(){$(a).load(function(){$("body").toggleClass("m-loaded",!0),GoogleMap.loadAPI()})}function c(){function b(){if(helpers.mobile())c.toggleClass("b-header__sticky",!0);else{var a=document.documentElement.scrollTop||document.body.scrollTop;c.toggleClass("b-header__sticky",e&&a>f)}}var c=$("#header"),d=$("#intro"),e=d.length>0,f=d.outerHeight()+10;b(),$(a).bind("scroll.headerState resize.headerState",function(){b()})}function d(){var a=$("#js-nav"),b=$("#header-nav"),c=$('a[href^="#"]:not(.js-tabs-toggle a)');a.bind("click",function(){b.toggleClass("opened")}),c.bind("click",function(a){var c=$(this).attr("href");c.length>1&&(a.preventDefault(),$("html, body").stop().animate({scrollTop:$(c).length?$(c).offset().top-50:0},1200,"easeInOutExpo"),b.toggleClass("opened",!1))})}function e(){$("[data-price]").on("click",function(){$($(this).attr("href")).find('select option[value="'+$(this).data("price")+'"]').prop("selected",!0),$.uniform.update(),$($(this).attr("href")).find("e-select").addClass("focus")})}return{init:function(){b(),c(),d(),e()}}}(window),helpers=function(a){"use strict";function b(){return"devicePixelRatio"in a&&a.devicePixelRatio>1}function c(){var b=$(a).width();return 480>b?"xs":b>=480&&768>b?"sm":b>=768&&970>b?"md":b>=970?"lg":void 0}function d(){var a={android:function(){return navigator.userAgent.match(/Android/i)},blackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)}};return a.android()||a.blackBerry()||a.iOS()||a.opera()||a.windows()}return{mobile:d,pixelsRatio:b,screen:c}}(window),forms=function(a){"use strict";function b(a){forms.styleControls(a+' input[type="checkbox"], '+a+' input[type="radio"]',a+" select"),forms.makePlaceholders(a+" [placeholder]"),forms.validate(a)}function c(b){$(b+" form").each(function(){var b=$(this);$.isFunction($.fn.validate)&&b.data("checkup")&&b.validate({onChange:!0,eachValidField:function(){formNotifications.hideErrorLabel.call($(this))},eachInvalidField:function(a,b){var c="undefined"!=typeof $(this).data("conditionalType")?formNotifications.labels.conditional[$(this).data("conditionalType")]:formNotifications.labels.conditional["default"],d="undefined"!=typeof $(this).data("patternType")?formNotifications.labels.pattern[$(this).data("patternType")]:formNotifications.labels.pattern["default"],e=b.required?b.conditional?b.pattern?"":d:c:formNotifications.labels.required;formNotifications.showErrorLabel.call($(this),e,0)},valid:function(b){var c=$(this),d=$(this).find('button[type="submit"].b-btn'),e=$(this).data("callback"),f=$(this).data("xhr");return"function"==typeof a[e]?(b.preventDefault(),a[e].call(c),!1):void(f&&(b.preventDefault(),$.ajax({url:c.attr("action"),method:c.attr("method"),data:c.serialize(),dataType:"json",beforeSend:function(){d.toggleClass("request")},success:function(a){d.toggleClass("request"),xhrFormHandler.response.call(c,a)}})))}}).find("input, textarea").on("focus",function(){$(this).closest(".m-error").removeClass("m-error")})})}function d(a,b){$.isFunction($.fn.uniform)&&($(a).uniform(),"undefined"!=typeof b&&$(b).uniform({selectClass:"e-select",selectAutoWidth:!1}))}function e(a){$.isFunction($.fn.placeholder)&&$(a).placeholder()}return{init:b,makePlaceholders:e,styleControls:d,validate:c}}(window),formNotifications=function(){"use strict";function a(a,b,c,d){var e=this.find(".b-form_message").length?this.find(".b-form_message"):$('<div class="b-form_message"></div>').prependTo(this),f='<div class="b-form_message_inner"><div class="b-form_message_balloon b-form_message_balloon__';f+=b?"success":"error",f+='">',f+=a,f+="</div></div>",e.height(e.height()).html(f),e.toggleClass("b-form_message__show",!0).animate({height:e.find(".b-form_message_inner").height(),paddingBottom:c?0:e.css("padding-bottom")},200,"easeOutQuart",function(){$(this).css({height:""})}),c&&e.next("form").toggleClass("b-form__hide",!0).slideUp({duration:300,easing:"easeOutQuart"}),"function"==typeof d&&d.call(this)}function b(){var a=this.find(".b-form_message").length?this.find(".b-form_message"):$('<div class="b-form_message"></div>').prependTo(this);a.slideUp({duration:300,easing:"easeOutQuart"})}function c(a){var b=this.closest(".b-form_box_field");b.find(".b-form_box_field"+e.errorSuffix).remove();var c='<div class="b-form_box_field';c+=e.errorSuffix,c+='">',c+=a,c+="</div>",b.append(c),setTimeout(function(){b.addClass(e.errorClass)},100)}function d(){var a=this.closest(".b-form_box_field");a.removeClass(e.errorClass),a.find(".b-form_box_field"+e.errorSuffix).remove()}var e={errorClass:"m-error",errorSuffix:"_error"},f={required:"This is required field",conditional:{"default":"Input does not coincide",credit:"Invalid credit card number",passwords:"The passwords entered do not match"},pattern:{"default":"Invalid data format",email:"Invalid email address",phone:"Invalid phone number"},submit:{success:"Thank you. We will contact you shortly.",error:"Error."}};return{labels:f,showErrorLabel:c,showMessage:a,hideErrorLabel:d,hideMessage:b}}(window),xhrFormHandler=function(a){"use strict";function b(b){var c="";b.status?(c=b.msg||formNotifications.labels.submit.success,formNotifications.showMessage.call(this.closest(".b-form"),c,!0,b.hideForm)):"console"in a&&(console.log("Invalid response format form handler:"),console.log(b))}return{response:b}}(window),mailChimp=function(){"use strict";var a=this;$.ajax({url:a.attr("action"),method:a.attr("method"),data:a.serialize(),dataType:"json",success:function(b){var c;"error"!=b.status?(c="<h3>Thank You!</h3><p>You have subscribed to our newsletter.</p>",formNotifications.showMessage.call(a.closest(".b-form"),c,!0,!0)):(c="<h3>Error!</h3>"+formNotifications.labels.pattern.email,formNotifications.showMessage.call(a.closest(".b-form"),c,!1,!1))}})},modules=function(a){"use strict";function b(a){function b(a){this.toggleClass("opened",!1),this.find(a+"-toggle").html(this.find(a+"-toggle").data("closed")||this.find(a+"-toggle").html()),this.find(a+"-text").slideUp({duration:300,easing:"easeOutQuart"})}function c(a){this.toggleClass("opened",!0),this.find(a+"-toggle").html(this.find(a+"-toggle").data("opened")||this.find(a+"-toggle").html()),this.find(a+"-text").slideDown({duration:300,easing:"easeOutQuart"})}$(a.selector).each(function(){var d=$(this),e=(d.find(a.selector+"-text",d),d.find(a.selector+"-toggle",d));d.not(".opened").find(a.selector+"-text").hide(),e.on("click.spoiler",function(d){d.preventDefault();var e=$(this).closest(a.selector),f=e.hasClass("opened")&&e.find(a.selector+"-text").is(":visible");f?b.call(e,a.selector):c.call(e,a.selector),e.data("closeNeighbors")&&e.siblings(a.selector).each(function(){b.call($(this),a.selector)})})})}function c(a){$(a.selector).each(function(){var b=$(this).find(a.selector+"-wrapper"),c=$(this).find(a.selector+"-toggle a.current");c.length||$(this).find(a.selector+"-toggle a:first").addClass("current");var d=$(this).find(a.selector+"-toggle a.current").attr("href"),e=$(this).find(a.selector+"-page"),f=$(this).find(a.selector+"-page"+d);e.toggleClass("visible",!1),f.toggleClass("visible",!0),$(this).find(a.selector+'-toggle a[href*="#"]').click(function(c){return c.preventDefault(),b.css({height:f.outerHeight(!0)}),$(this).closest(a.selector).find(a.selector+"-toggle a").removeClass("current"),$(this).addClass("current"),f=$(this).closest(a.selector).find(a.selector+"-page"+$(this).attr("href")),e.toggleClass("visible",!1),f.toggleClass("visible",!0),b.animate({height:f.outerHeight(!0)},500,"easeOutQuart",function(){f.toggleClass("visible",!0),$(this).css({height:""})}),"undefined"!=typeof a.onToggle&&a.onToggle&&a.onToggle($(this),$(this).closest(a.selector).find(a.selector+"-page"+$(this).attr("href"))),!1})})}function d(){$('a[data-target="_blank"]').on("click",function(){return!a.open($(this).attr("href"))})}return{init:function(){b({selector:".js-spoiler"}),c({selector:".js-tabs"}),d()}}}(window),plugins=function(a){"use strict";function b(){var a=$(".b-about_summary_counter_digits");a.each(function(){$(this).counterUp()})}function c(){if($.isFunction($.fn.owlCarousel)){var a=this;a.owlCarousel({margin:4,loop:!0,autoplay:a.data("auto")||!1,autoplayTimeout:1e3*a.data("interval")||1e4,mouseDrag:!1,touchDrag:!0,pullDrag:!1,freeDrag:!1,dots:!1,navText:["",""],navClass:["owl-prev e-arrow e-arrow__left","owl-next e-arrow e-arrow__right"],responsive:{0:{items:a.data("xs"),nav:a.find(".b-carousel_item").length>=a.data("xs")},480:{items:a.data("sm"),nav:a.find(".b-carousel_item").length>=a.data("sm")},768:{items:a.data("md"),nav:a.find(".b-carousel_item").length>=a.data("md")},970:{items:a.data("lg"),nav:a.find(".b-carousel_item").length>=a.data("lg")}}})}}function d(a){var b=this;$.isFunction($.fn.flexslider)&&b.find("."+a+"_inner > div").length>1&&b.flexslider({namespace:a+"_",selector:"."+a+"_inner > div",controlsContainer:b.parent(),animation:b.data("animation")||"slide",animationLoop:!0,animationSpeed:b.data("speed")||400,slideshow:b.data("auto")||!1,slideshowSpeed:1e3*b.data("interval")||5e3,showNearby:b.data("showNearby")||!1,directionNav:b.data("arrows")?b.data("arrows"):!0,controlNav:b.data("control")||!1,controlNavLoop:b.data("controlLoop")||!1,progressLine:b.data("progress")||!1,thumbCaptions:b.data("controlCaptions")||!1,thumbBg:b.data("thumbsAsBg")||!1,thumbCount:b.data("thumbsCount")?b.data("thumbsCount").split(","):[1,2,2,2],pauseOnAction:!0,prevText:"",nextText:"",after:function(a){!a.playing&&a.data("auto")&&a.play()}})}function e(){$(".js-img").leafLetPopUp({animationStyleOfBox:"scale",boxWidth:"100%",boxHorizontalGutters:10,closeBtnLocation:"box",overlayOpacity:.5,scrollMode:"inner",img:!0}),$(".js-popup").leafLetPopUp({animationStyleOfBox:"scale",boxWidth:580,boxHorizontalGutters:10,closeBtnLocation:"box",overlayOpacity:.5,afterLoad:function(){forms.init(".b-leaflet")}})}function f(){function b(a){var b=this;b.waypoint("destroy"),helpers.mobile()||"xs"==helpers.screen()||b.waypoint(function(){b.toggleClass("b-section__show",!0)},{offset:a})}var c=$(".b-section");c.each(function(a){b.call($(this),c.length-1==a?"50%":"35%")}),$(a).on("load.wayPoint resize.wayPoint",function(){c.each(function(a){b.call($(this),c.length-1==a?"50%":"35%")})})}return{init:function(){c.call($("#about-carousel")),c.call($("#partners-carousel")),d.call($("#intro-slider"),"b-slider"),e(),f(),b()}}}(window),GoogleMap=function(a){"use strict";function b(){var a=document.createElement("script");a.type="text/javascript",a.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=GoogleMap.init",document.body.appendChild(a)}function c(){function b(a){a>1?(n.extend(g),p.fitBounds(n)):(p.setCenterWithOffset(g,d()),p.setZoom(i||15))}function c(b,c){this.geocode({address:b},function(b,d){d==google.maps.GeocoderStatus.OK?c(b):"console"in a&&(console.log("Geocoder failed due to: "+d),console.log(b))})}function d(){var a=[0,0],b=$(".b-contacts .container");return"md"==helpers.screen()?a=[-(b.width()/4),0]:"lg"==helpers.screen()&&(a=[-(b.width()/6),0]),a}function e(a,b,c){this.latlng=a,this.args=c,this.setMap(b)}if("undefined"!=typeof google){var f,g,h=$("#contacts_map"),i=h.data("zoom"),j=h.data("address"),k=h.data("coordinates"),l=new google.maps.Geocoder,m=new google.maps.LatLng(0,0),n=new google.maps.LatLngBounds,o={zoom:i||8,scrollwheel:!1,center:m,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0},p=new google.maps.Map(h[0],o),q=j&&""!=j?j.split(";"):!1,r=k&&""!=k?k.split(";"):!1;if(q&&q.length&&!r)for(var s=0;s<q.length;s++)c.call(l,q[s],function(c){g=c[0].geometry.location,f=new e(g,p,{marker_id:"b_contacts_map_marker"}),b(q.length),google.maps.event.addDomListener(a,"resize",function(){google.maps.event.trigger(p,"resize"),b(q.length)})});else if(r&&r.length)for(var t=0;t<r.length;t++){var u=r[t].split(",");g=new google.maps.LatLng(u[0],u[1]),f=new e(g,p,{marker_id:"b_contacts_map_marker"}),b(r.length),google.maps.event.addDomListener(a,"resize",function(){google.maps.event.trigger(p,"resize"),b(r.length)})}}e.prototype=new google.maps.OverlayView,e.prototype.draw=function(){var a=this,b=this.div;if(!b){b=this.div=document.createElement("div"),b.className="b-contacts_map_marker",b.style.position="absolute",b.style.cursor="pointer","undefined"!=typeof a.args.marker_id&&"undefined"!=typeof b.dataset&&(b.dataset.marker_id=a.args.marker_id);var c=this.getPanes();c.overlayImage.appendChild(b)}var d=this.getProjection().fromLatLngToDivPixel(this.latlng);d&&(b.style.left=d.x-17+"px",b.style.top=d.y-17+"px")},e.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.getPosition=function(){return this.latlng},google.maps.Map.prototype.setCenterWithOffset=function(a,b){var c=this,d=new google.maps.OverlayView;d.onAdd=function(){var d=this.getProjection(),e=d.fromLatLngToContainerPixel(a);e.x=e.x+b[0],e.y=e.y+b[1],c.setCenter(d.fromContainerPixelToLatLng(e))},d.draw=function(){},d.setMap(this)}}return{init:c,loadAPI:b}}(window);